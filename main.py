import streamlit as st

# ğŸŒˆ ì„¤ì •
st.set_page_config(page_title="MBTI ì§„ë¡œ ì¶”ì²œ í…ŒìŠ¤íŠ¸", page_icon="ğŸ§ ", layout="centered")

# ğŸ¨ íƒ€ì´í‹€
st.markdown("<h1 style='text-align: center;'>ğŸŒŸ ë‚˜ì˜ MBTIëŠ”? ê·¸ë¦¬ê³  ì–´ìš¸ë¦¬ëŠ” ì§ì—…ì€? ğŸ’¼</h1>", unsafe_allow_html=True)
st.markdown("---")

# ğŸ“‹ ê°„ë‹¨í•œ MBTI í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì§€
questions = [
    ("ì‚¬êµì ì¸ í¸ì´ë‹¤", 'E'),
    ("í˜¼ì ìˆëŠ” ì‹œê°„ì´ í•„ìš”í•˜ë‹¤", 'I'),
    ("ì§ê´€ì ìœ¼ë¡œ ë¬¸ì œë¥¼ ì´í•´í•œë‹¤", 'N'),
    ("í˜„ì‹¤ì ìœ¼ë¡œ ë¬¸ì œë¥¼ ë³¸ë‹¤", 'S'),
    ("ê°ì •ë³´ë‹¤ ë…¼ë¦¬ë¥¼ ìš°ì„ í•œë‹¤", 'T'),
    ("ë…¼ë¦¬ë³´ë‹¤ ê°ì •ì„ ì¤‘ì‹œí•œë‹¤", 'F'),
    ("ê³„íšì„ ì„¸ìš°ê³  ì‹¤ì²œí•œë‹¤", 'J'),
    ("ì¦‰í¥ì ìœ¼ë¡œ ì›€ì§ì¸ë‹¤", 'P'),
]

# ğŸ“© ì‚¬ìš©ì ì„ íƒ ì €ì¥í•  ë³€ìˆ˜
responses = {}

# ğŸ§  í…ŒìŠ¤íŠ¸ ì‹œì‘
with st.form("mbti_test"):
    st.write("ğŸ‘‡ ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”!")
    for q, trait in questions:
        responses[trait] = st.radio(f"{q}", [f"{trait} ì„±í–¥", f"ë°˜ëŒ€ ì„±í–¥"], key=q)
    
    submitted = st.form_submit_button("MBTI ê²°ê³¼ ë³´ê¸° ğŸš€")

if submitted:
    # ğŸ” MBTI ê³„ì‚°
    result = ''
    result += 'E' if responses['E'].startswith('E') else 'I'
    result += 'N' if responses['N'].startswith('N') else 'S'
    result += 'T' if responses['T'].startswith('T') else 'F'
    result += 'J' if responses['J'].startswith('J') else 'P'

    st.markdown(f"<h2 style='text-align:center;'>âœ¨ ë‹¹ì‹ ì˜ MBTIëŠ” <span style='color:#6C5CE7'>{result}</span> ì…ë‹ˆë‹¤! âœ¨</h2>", unsafe_allow_html=True)

    # ğŸ§‘â€ğŸ¨ ìºë¦­í„° ì•„ë°”íƒ€ (ì˜ˆì‹œ ì´ë¯¸ì§€)
    st.image(f"https://avatars.dicebear.com/api/personas/{result}.svg", width=200, caption=f"{result} ìºë¦­í„° ì•„ë°”íƒ€")

    # ğŸ“Œ ì§ì—… ì¶”ì²œ ëª©ë¡
    career_dict = {
        "INTJ": ["ë°ì´í„° ê³¼í•™ì ğŸ“Š", "ì „ëµ ì»¨ì„¤í„´íŠ¸ ğŸ§ ", "ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì ğŸ’»"],
        "INTP": ["ì´ë¡  ë¬¼ë¦¬í•™ì ğŸ§ª", "AI ì—°êµ¬ì ğŸ¤–", "ê²Œì„ ê°œë°œì ğŸ®"],
        "ENTJ": ["CEO ğŸ§‘â€ğŸ’¼", "ê¸°ì—… ì „ëµê°€ ğŸ¢", "ì •ì¹˜ê°€ ğŸ›ï¸"],
        "ENTP": ["ìŠ¤íƒ€íŠ¸ì—… ì°½ì—…ì ğŸš€", "ê´‘ê³  ê¸°íšì ğŸ“¢", "ë°œëª…ê°€ ğŸ”§"],
        "INFJ": ["ì‹¬ë¦¬ìƒë‹´ê°€ ğŸ§˜â€â™€ï¸", "ì¸ê¶Œìš´ë™ê°€ âœŠ", "ì‘ê°€ âœï¸"],
        "INFP": ["ì†Œì„¤ê°€ ğŸ“–", "ì‹œë‚˜ë¦¬ì˜¤ ì‘ê°€ ğŸ¬", "ì¼ëŸ¬ìŠ¤íŠ¸ë ˆì´í„° ğŸ¨"],
        "ENFJ": ["êµì‚¬ ğŸ‘©â€ğŸ«", "ì¸ì‚¬ë‹´ë‹¹ì ğŸ¤", "ê°•ì—°ê°€ ğŸ¤"],
        "ENFP": ["ìœ íŠœë²„ ğŸ“¹", "ì´ë²¤íŠ¸ ê¸°íšì ğŸ‰", "ì˜ˆìˆ  ê°ë… ğŸ­"],
        "ISTJ": ["íšŒê³„ì‚¬ ğŸ“ˆ", "ë²•ë¥  ì „ë¬¸ê°€ âš–ï¸", "ê³µë¬´ì› ğŸ›ï¸"],
        "ISFJ": ["ê°„í˜¸ì‚¬ ğŸ¥", "ì‚¬íšŒë³µì§€ì‚¬ ğŸ¤²", "ì´ˆë“±êµì‚¬ ğŸ‘¶"],
        "ESTJ": ["ê²½ì˜ ê´€ë¦¬ì ğŸ—‚ï¸", "êµ°ì¸ ğŸª–", "í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € ğŸ“…"],
        "ESFJ": ["í˜¸í…”ë¦¬ì–´ ğŸ¨", "ìƒë‹´ êµì‚¬ ğŸ“˜", "í™ë³´ ë‹´ë‹¹ì ğŸ’¬"],
        "ISTP": ["ì—”ì§€ë‹ˆì–´ ğŸ› ï¸", "íŒŒì¼ëŸ¿ âœˆï¸", "ì‘ê¸‰ êµ¬ì¡°ì‚¬ ğŸš‘"],
        "ISFP": ["í”Œë¡œë¦¬ìŠ¤íŠ¸ ğŸ’", "ë³´ì„ ë””ìì´ë„ˆ ğŸ’", "ì‚¬ì§„ì‘ê°€ ğŸ“¸"],
        "ESTP": ["ì„¸ì¼ì¦ˆ ë§¤ë‹ˆì € ğŸ“", "ìŠ¤í„´íŠ¸ë§¨ ğŸ¬", "ê¸°ì—…ê°€ ğŸ’¼"],
        "ESFP": ["ë°°ìš° ğŸ­", "íŒ¨ì…˜ ë””ìì´ë„ˆ ğŸ‘—", "MC ğŸ™ï¸"]
    }

    # ğŸ¥‡ ì¶”ì²œ ì§ì—… ì¶œë ¥
    st.markdown(f"### ğŸ’¼ {result}ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ì¶”ì²œ ì§ì—…!")
    for job in career_dict.get(result, []):
        st.markdown(f"- {job}")

    # ğŸ” ë‹¤ë¥¸ MBTI ì§ì—… ë³´ê¸°
    with st.expander("ë‹¤ë¥¸ MBTIì˜ ì§ì—… ì¶”ì²œë„ ë³´ê¸° ğŸ”"):
        for mbti_type, jobs in career_dict.items():
            if mbti_type != result:
                st.markdown(f"**{mbti_type}** ğŸ‘‡")
                st.markdown(" / ".join(jobs))
                st.markdown("---")
